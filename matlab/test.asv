
clear all;
%%
%%novatel lla collection & to enu
% fix1 = readmatrix('csv/231225_YL/hole1_1-novatel-fix.csv');
% fix2 = readmatrix('csv/231225_YL/hole1_2-novatel-fix.csv');
% fix3 = readmatrix('csv/231225_YL/hole1_3-novatel-fix.csv');
% fix4 = readmatrix('csv/231225_YL/hole1_4-novatel-fix.csv');
% fix5 = readmatrix('csv/231225_YL/hole1_5-novatel-fix.csv');
% fix6 = readmatrix('csv/231225_YL/hole1_6-novatel-fix.csv');
% fix7 = readmatrix('csv/231225_YL/hole1_7-novatel-fix.csv');
% llh =  vertcat(fix1(:,8:10), fix2(:,8:10), fix3(:,8:10), fix4(:,8:10), fix5(:,8:10), fix6(:,8:10), fix7(:,8:10));

ee_building_llh = [22.99665875 120.222584889 98.211];

 
fix = readmatrix('csv/novatel_fix.csv');
llh = fix(:,8:10);
for i = 1:size(llh,1)
    enu(i,:) = llh2enu(llh(i,:), ee_building_llh);
end
%%
max_x = max(enu(:,1));
min_x = min(enu(:,1));
max_y = max(enu(:,2));
min_y = min(enu(:,2));
interval_x = max_x - min_x;
interval_y = max_y - min_y;
x = linspace(min_x,max_y,25);
y = linspace(min_y,max_y,25);
[xi,yi] = meshgrid(x,y);
zi = interp2(enu(:,1),enu(:,2),enu(:,3),xi,yi,'nearest');
%%

surf(xi,yi,zi)
hold on
plot3(enu(:,1),enu(:,2),enu(:,3),'o')
xlim([min_x-0.05*interval_x max_x+0.05*interval_x]);
ylim([min_y-0.05*interval_y max_y+0.05*interval_y]);


%%
 zt = griddata(enu(:,1),enu(:,2),enu(:,3),xt,yt,'v4');
%%
figure(1)
surf(xt,yt,zt)
shading interp
colorbar
%%
figure(2)
surf(xt,yt,zt)
hold on
plot3(enu(:,1),enu(:,2),enu(:,3),'o')
xlabel('e');
ylabel('n');
zlabel('u');
colorbar

%%
figure(3)
surfc(xt,yt,zt)
xlabel('e');
ylabel('n');
zlabel('u');
colorbar

%%
figure(4)
surfl(xt,yt,zt)
xlabel('e');
ylabel('n');
zlabel('u');
colorbar

%%
figure(5)
mesh(xt,yt,zt)
xlabel('e');
ylabel('n');
zlabel('u');
colorbar

%%
figure(6)
meshc(xt,yt,zt)
xlabel('e');
ylabel('n');
zlabel('u');
colorbar
%%
figure(7)
meshz(xt,yt,zt)
xlabel('e');
ylabel('n');
zlabel('u');
colorbar

%%

x = linspace(-2, 2, 25);	% 在 x 軸 [-2,2] 之間取 25 點  
y = linspace(-2, 2, 25);	% 在 y 軸 [-2,2] 之間取 25 點  
[xx, yy] = meshgrid(x, y);	% xx 和 yy 都是 25×25 的矩陣  
zz = xx.*exp(-xx.^2-yy.^2);	% 計算函數值，zz 也是 25×25 的矩陣
mesh(xx, yy, zz);		% 畫出立體網狀圖 
%colormap(zeros(1,3));		% 以黑色呈現